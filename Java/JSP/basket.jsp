<%@ page import="shop.Product" %><%@ page import="java.util.Map" %><jsp:useBean id='basket'             scope='session'             class='shop.Basket'/><%    String empty = request.getParameter("emptyBasket");    if (empty != null) {        basket.clearBasket();        response.sendRedirect("basket.jsp");    }    String item = request.getParameter("addItem");    if (item != null) {        basket.addItem(item);        response.sendRedirect("basket.jsp");    }    String productID = request.getParameter("changeItem");    String editedQuantity = request.getParameter("editQuantity");    if (productID!= null && editedQuantity  != null) {        basket.editBasket(productID, Integer.parseInt(editedQuantity));        response.sendRedirect("basket.jsp");    }    String discardProduct = request.getParameter("deleteItem");    if (discardProduct != null) {        basket.deleteItem(discardProduct);  //Calling Delete Method        response.sendRedirect("basket.jsp");    }%><html><head>    <title>Basket</title>    <link rel="stylesheet" type="text/css" href="css/Basket_1706038.css"></head><body><jsp:include page="menu.jsp"/><div align="center"<% if (basket.getItems().size() > 0) { %><h2 id="heading"> Added to your basket </h2>    <table id="basket-table">    <tr>        <th>Picture</th>        <th>Title</th>        <th>Price</th>        <th>Quantity</th>        <th>Edit Quantity </th>    </tr>    <% Map<Product, Integer> items = basket.getItems();        for (Product prod : items.keySet()) {    %>    <tr>        <td><img id="item-pic" src="<%= prod.thumbnail %>"/></td>        <td><a href="viewProduct.jsp?pid=<%= prod.PID %>"><%= prod.title %></a></td>        <td><%= prod.formatPrice() %></td>        <td><%= items.get(prod) %></td>        <td>            <form action="basket.jsp" method="get">                <input type="hidden" name="editQuantity" value="-1">                <input type="hidden" name="changeItem" value="<%= prod.PID %>">                <input class="table-button" type="submit" value="Delete Item">            </form>            <form action="basket.jsp" method="get">                <input type="hidden" name="editQuantity" value="1">                <input type="hidden" name="changeItem" value="<%= prod.PID %>">                <input class="table-button" type="submit" value="Add More">            </form>            <form action="basket.jsp" method="get">                <input type="hidden" name="deleteItem" value="<%= prod.PID %>">                <input type="submit" value="Remove Product ">            </form>        </td>    </tr>    <% } %></table><% } else { %><p>Your basket is currently empty.</p><% } %><p> Order total = <%= basket.getTotalString() %>        <% if ( basket.getTotal() > 0) { %>    <legend>Details</legend>    <form method="POST" action="order.jsp" onsubmit="return ValidateForm(this);">        <p>Name: <input type="text" size="32" name="name">        <input type="submit" value="Place Order" ></p>    </form>    <form action="basket.jsp" method="get">        <input type="hidden" name="emptyBasket" value="yes">        <input type="submit" value="Empty Basket"/>    </form><% } %></div><script>    function ValidateForm(form)    {        if(form.name.value == "") {            alert("Enter Your Name !");            return false;        }        // regular expression to match only alphanumeric characters and spaces        var reg = /^[\w ]+$/;        if(!reg.test(form.name.value)) {            alert("Enter valid name ");            return false;        }        return true;    }</script></body></html>